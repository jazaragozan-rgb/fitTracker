<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>fitTracker - Autenticación</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <section id="auth">
    <form id="form-login" onsubmit="return false;">
      <h3><span style="font-weight: bold;color: rgb(0, 0, 0);">INICIAR SESIÓN</span></h3>
      <input id="log-email" type="email" placeholder="Email" required>
      <input id="log-pass" type="password" placeholder="Contraseña" required>
      <button type="button" id="btnLogin">Entrar</button>
      <button type="button" id="showRegisterBtn">Crear cuenta nueva</button>
      <div id="log-msg" class="hint"></div>
    </form>

    <form id="form-register" class="hidden" onsubmit="return false;">
      <h3><span style="font-weight: bold;color: rgb(0, 0, 0);">REGISTRO</span></h3>
      <input id="reg-email" type="email" placeholder="Email" required>
      <input id="reg-pass" type="password" placeholder="Contraseña (mín. 6 caracteres)" minlength="6" required>
      <input id="reg-pass2" type="password" placeholder="Repite la contraseña" minlength="6" required>
      <button type="button" id="btnRegister">Crear cuenta</button>
      <button type="button" id="showLoginBtn">Ya tengo cuenta</button>
      <div id="reg-msg" class="hint"></div>
    </form>
  </section>
  
  <!-- ✅ Script inline para manejar el toggle (se ejecuta ANTES de los módulos) -->
  <script>
    console.log('[auth.html] Script inline cargado');
    
    // Esperar a que el DOM esté listo
    document.addEventListener('DOMContentLoaded', function() {
      console.log('[auth.html] DOMContentLoaded - Inicializando toggle');
      
      const formLogin = document.getElementById('form-login');
      const formRegister = document.getElementById('form-register');
      const showRegisterBtn = document.getElementById('showRegisterBtn');
      const showLoginBtn = document.getElementById('showLoginBtn');
      
      console.log('[auth.html] Elementos encontrados:', {
        formLogin: !!formLogin,
        formRegister: !!formRegister,
        showRegisterBtn: !!showRegisterBtn,
        showLoginBtn: !!showLoginBtn
      });
      
      if (showRegisterBtn) {
        console.log('[auth.html] ✓ Añadiendo listener a "Crear cuenta nueva"');
        showRegisterBtn.addEventListener('click', function(e) {
          console.log('[auth.html] ¡Click en Crear cuenta nueva!');
          e.preventDefault();
          e.stopPropagation();
          
          formLogin.classList.add('hidden');
          formRegister.classList.remove('hidden');
          
          const logMsg = document.getElementById('log-msg');
          if (logMsg) logMsg.textContent = '';
          
          console.log('[auth.html] Toggle ejecutado - form-register visible');
        });
      } else {
        console.error('[auth.html] ❌ No se encontró showRegisterBtn');
      }
      
      if (showLoginBtn) {
        console.log('[auth.html] ✓ Añadiendo listener a "Ya tengo cuenta"');
        showLoginBtn.addEventListener('click', function(e) {
          console.log('[auth.html] ¡Click en Ya tengo cuenta!');
          e.preventDefault();
          e.stopPropagation();
          
          formRegister.classList.add('hidden');
          formLogin.classList.remove('hidden');
          
          const regMsg = document.getElementById('reg-msg');
          if (regMsg) regMsg.textContent = '';
          
          console.log('[auth.html] Toggle ejecutado - form-login visible');
        });
      } else {
        console.error('[auth.html] ❌ No se encontró showLoginBtn');
      }
    });
  </script>
  
  <!-- ✅ Módulo auth.js se carga DESPUÉS (para las funciones de Firebase) -->
  <script type="module" src="auth.js"></script>
</body>
</html>